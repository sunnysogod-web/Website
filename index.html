<!doctype html>
<html lang="th" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Prompt', sans-serif;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes wiggle {
      0%, 100% { transform: rotate(-3deg); }
      50% { transform: rotate(3deg); }
    }
    
    @keyframes bounce-slow {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }
    
    @keyframes pulse-ring {
      0% { transform: scale(0.8); opacity: 1; }
      100% { transform: scale(1.5); opacity: 0; }
    }
    
    @keyframes leaf-sway {
      0%, 100% { transform: rotate(-5deg) translateX(0); }
      50% { transform: rotate(5deg) translateX(5px); }
    }
    
    @keyframes cloud-move {
      0% { transform: translateX(-10px); }
      100% { transform: translateX(10px); }
    }
    
    .float-animation { animation: float 3s ease-in-out infinite; }
    .wiggle-animation { animation: wiggle 2s ease-in-out infinite; }
    .bounce-animation { animation: bounce-slow 2s ease-in-out infinite; }
    .leaf-animation { animation: leaf-sway 4s ease-in-out infinite; }
    .cloud-animation { animation: cloud-move 6s ease-in-out infinite alternate; }
    
    .notification-badge {
      position: relative;
    }
    
    .notification-badge::after {
      content: '';
      position: absolute;
      top: -2px;
      right: -2px;
      width: 12px;
      height: 12px;
      background: #ef4444;
      border-radius: 50%;
      animation: pulse-ring 1.5s ease-out infinite;
    }
    
    .glass-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.5);
    }
    
    .gradient-border {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 3px;
      border-radius: 1rem;
    }
    
    .gradient-border > div {
      background: white;
      border-radius: calc(1rem - 3px);
    }
    
    .school-pattern {
      background-image: 
        radial-gradient(circle at 20% 80%, rgba(120, 200, 120, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(100, 180, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(255, 200, 100, 0.05) 0%, transparent 30%);
    }
    
    input:focus, select:focus, textarea:focus {
      outline: none;
      ring: 2px;
      ring-color: #667eea;
    }
    
    .cute-shadow {
      box-shadow: 0 10px 40px rgba(102, 126, 234, 0.15), 0 4px 12px rgba(0, 0, 0, 0.05);
    }
    
    .status-pending { background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); }
    .status-approved { background: linear-gradient(135deg, #34d399 0%, #10b981 100%); }
    .status-rejected { background: linear-gradient(135deg, #f87171 0%, #ef4444 100%); }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 school-pattern overflow-auto">
  <div id="app" class="min-h-full w-full">
   <!-- Decorative Elements -->
   <div class="fixed top-10 left-10 text-6xl float-animation opacity-60 pointer-events-none z-0">
    üå≥
   </div>
   <div class="fixed top-20 right-20 text-5xl wiggle-animation opacity-60 pointer-events-none z-0">
    üå∏
   </div>
   <div class="fixed bottom-20 left-20 text-4xl bounce-animation opacity-60 pointer-events-none z-0">
    üìö
   </div>
   <div class="fixed bottom-10 right-10 text-5xl leaf-animation opacity-60 pointer-events-none z-0">
    üçÉ
   </div>
   <div class="fixed top-40 left-1/4 text-3xl cloud-animation opacity-40 pointer-events-none z-0">
    ‚òÅÔ∏è
   </div>
   <div class="fixed top-60 right-1/4 text-4xl cloud-animation opacity-40 pointer-events-none z-0" style="animation-delay: 2s;">
    ‚òÅÔ∏è
   </div><!-- Login Page - Student -->
   <div id="loginPage" class="min-h-full w-full flex items-center justify-center p-4 relative z-10">
    <div class="w-full max-w-md">
     <div class="gradient-border cute-shadow">
      <div class="p-8">
       <!-- Cute Student Character -->
       <div class="text-center mb-6">
        <div class="text-8xl mb-2 float-animation">
         üë®‚Äçüéì
        </div>
        <div class="flex justify-center gap-2 text-2xl">
         <span class="wiggle-animation" style="animation-delay: 0.1s;">üéí</span> <span class="bounce-animation" style="animation-delay: 0.2s;">‚úèÔ∏è</span> <span class="wiggle-animation" style="animation-delay: 0.3s;">üìñ</span>
        </div>
       </div>
       <h1 id="schoolNameDisplay" class="text-2xl font-bold text-center bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent mb-2">‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô</h1>
       <p class="text-gray-500 text-center mb-6 text-sm">üè´ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô - ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</p>
       <div class="space-y-4">
        <div>
         <label class="block text-sm font-medium text-gray-700 mb-1"> üé´ ‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô </label> <input type="text" id="studentIdInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô 12345" class="w-full px-4 py-3 border-2 border-purple-100 rounded-xl focus:border-purple-400 transition-all">
        </div>
        <div>
         <label class="block text-sm font-medium text-gray-700 mb-1"> ü™™ ‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô (4 ‡∏ï‡∏±‡∏ß‡∏ó‡πâ‡∏≤‡∏¢) </label> <input type="password" id="nationalIdInput" placeholder="‡πÄ‡∏ä‡πà‡∏ô 1234" maxlength="4" class="w-full px-4 py-3 border-2 border-purple-100 rounded-xl focus:border-purple-400 transition-all">
        </div><button onclick="studentLogin()" class="w-full py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-xl font-semibold hover:from-purple-600 hover:to-blue-600 transform hover:scale-[1.02] transition-all shadow-lg"> üöÄ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö </button>
        <div class="relative my-4">
         <div class="absolute inset-0 flex items-center">
          <div class="w-full border-t border-gray-200"></div>
         </div>
         <div class="relative flex justify-center text-sm">
          <span class="px-4 bg-white text-gray-400">‡∏´‡∏£‡∏∑‡∏≠</span>
         </div>
        </div><button onclick="showTeacherLogin()" class="w-full py-3 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl font-semibold hover:from-green-600 hover:to-teal-600 transform hover:scale-[1.02] transition-all shadow-lg"> üë®‚Äçüè´ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏π </button>
       </div>
       <div id="loginError" class="mt-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm hidden">
        ‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
       </div>
      </div>
     </div>
    </div>
   </div><!-- Teacher Login Page -->
   <div id="teacherLoginPage" class="min-h-full w-full flex items-center justify-center p-4 relative z-10 hidden">
    <div class="w-full max-w-md">
     <div class="gradient-border cute-shadow">
      <div class="p-8">
       <div class="text-center mb-6">
        <div class="text-8xl mb-2 float-animation">
         üë®‚Äçüè´
        </div>
        <div class="flex justify-center gap-2 text-2xl">
         <span class="wiggle-animation">üìã</span> <span class="bounce-animation">‚úÖ</span> <span class="wiggle-animation">üìä</span>
        </div>
       </div>
       <h1 class="text-2xl font-bold text-center bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent mb-2">‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô</h1>
       <p class="text-gray-500 text-center mb-6 text-sm">üè´ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏£‡∏π‡πÅ‡∏•‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£</p>
       <div class="space-y-4">
        <div>
         <label class="block text-sm font-medium text-gray-700 mb-1"> üë§ ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ </label> <input type="text" id="teacherUsername" placeholder="username" class="w-full px-4 py-3 border-2 border-green-100 rounded-xl focus:border-green-400 transition-all">
        </div>
        <div>
         <label class="block text-sm font-medium text-gray-700 mb-1"> üîë ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô </label> <input type="password" id="teacherPassword" placeholder="password" class="w-full px-4 py-3 border-2 border-green-100 rounded-xl focus:border-green-400 transition-all">
        </div><button onclick="teacherLogin()" class="w-full py-3 bg-gradient-to-r from-green-500 to-teal-500 text-white rounded-xl font-semibold hover:from-green-600 hover:to-teal-600 transform hover:scale-[1.02] transition-all shadow-lg"> üîì ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö </button> <button onclick="showStudentLogin()" class="w-full py-2 text-gray-500 hover:text-gray-700 transition-all"> ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô </button>
       </div>
       <div id="teacherLoginError" class="mt-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm hidden">
        ‚ùå ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
       </div>
       <div class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-xl text-blue-600 text-sm">
        üí° ‡∏ó‡∏î‡∏™‡∏≠‡∏ö: admin / 1234
       </div>
      </div>
     </div>
    </div>
   </div><!-- Student Dashboard -->
   <div id="studentDashboard" class="min-h-full w-full p-4 relative z-10 hidden">
    <div class="max-w-2xl mx-auto">
     <!-- Header -->
     <div class="glass-card rounded-2xl p-4 mb-4 cute-shadow">
      <div class="flex items-center justify-between">
       <div class="flex items-center gap-3">
        <div class="text-4xl float-animation">
         üë®‚Äçüéì
        </div>
        <div>
         <p class="font-semibold text-gray-800" id="welcomeStudent">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö</p>
         <p class="text-sm text-gray-500" id="studentIdDisplay">‡∏£‡∏´‡∏±‡∏™: -</p>
        </div>
       </div><button onclick="logout()" class="px-4 py-2 bg-red-100 text-red-600 rounded-xl hover:bg-red-200 transition-all text-sm font-medium"> üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö </button>
      </div>
     </div><!-- Tabs -->
     <div class="glass-card rounded-2xl p-2 mb-4 cute-shadow">
      <div class="flex gap-2">
       <button onclick="showStudentTab('request')" id="tabRequest" class="flex-1 py-3 px-4 rounded-xl font-medium transition-all bg-gradient-to-r from-purple-500 to-blue-500 text-white"> üìù ‡∏Ç‡∏≠‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô </button> <button onclick="showStudentTab('history')" id="tabHistory" class="flex-1 py-3 px-4 rounded-xl font-medium transition-all bg-gray-100 text-gray-600 hover:bg-gray-200"> üìã ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠ </button>
      </div>
     </div><!-- Request Form -->
     <div id="requestForm" class="glass-card rounded-2xl p-6 cute-shadow">
      <div class="flex items-center gap-2 mb-6">
       <span class="text-3xl wiggle-animation">üìù</span>
       <h2 class="text-xl font-bold text-gray-800">‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ç‡∏≠‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô</h2>
      </div>
      <div class="space-y-4">
       <div class="grid grid-cols-2 gap-4">
        <div>
         <label class="block text-sm font-medium text-gray-700 mb-1">üë§ ‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•</label> <input type="text" id="formName" placeholder="‡∏ä‡∏∑‡πà‡∏≠ ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" class="w-full px-4 py-3 border-2 border-purple-100 rounded-xl focus:border-purple-400 transition-all">
        </div>
        <div>
         <label class="block text-sm font-medium text-gray-700 mb-1">üè´ ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label> <input type="text" id="formClass" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏°.3/1" class="w-full px-4 py-3 border-2 border-purple-100 rounded-xl focus:border-purple-400 transition-all">
        </div>
       </div>
       <div class="grid grid-cols-2 gap-4">
        <div>
         <label class="block text-sm font-medium text-gray-700 mb-1">üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏≤</label> <input type="date" id="formDate" class="w-full px-4 py-3 border-2 border-purple-100 rounded-xl focus:border-purple-400 transition-all">
        </div>
        <div>
         <label class="block text-sm font-medium text-gray-700 mb-1">üïê ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</label> <input type="time" id="formTimeOut" class="w-full px-4 py-3 border-2 border-purple-100 rounded-xl focus:border-purple-400 transition-all">
        </div>
       </div>
       <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">üïê ‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö (‡∏ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤)</label> <input type="time" id="formTimeReturn" placeholder="‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö" class="w-full px-4 py-3 border-2 border-purple-100 rounded-xl focus:border-purple-400 transition-all">
       </div>
       <div class="grid grid-cols-2 gap-4">
        <div>
         <label class="block text-sm font-medium text-gray-700 mb-1">üë§ ‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á</label> <input type="text" id="formParentName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á" class="w-full px-4 py-3 border-2 border-purple-100 rounded-xl focus:border-purple-400 transition-all">
        </div>
        <div>
         <label class="block text-sm font-medium text-gray-700 mb-1">üì± ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á</label> <input type="tel" id="formParentPhone" placeholder="0XX-XXX-XXXX" class="w-full px-4 py-3 border-2 border-purple-100 rounded-xl focus:border-purple-400 transition-all">
        </div>
       </div>
       <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">üìã ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏•‡∏≤</label> <select id="formReason" class="w-full px-4 py-3 border-2 border-purple-100 rounded-xl focus:border-purple-400 transition-all"> <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• --</option> <option value="‡∏õ‡πà‡∏ß‡∏¢/‡∏û‡∏ö‡πÅ‡∏û‡∏ó‡∏¢‡πå">üè• ‡∏õ‡πà‡∏ß‡∏¢/‡∏û‡∏ö‡πÅ‡∏û‡∏ó‡∏¢‡πå</option> <option value="‡∏ò‡∏∏‡∏£‡∏∞‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß">üë®‚Äçüë©‚Äçüëß ‡∏ò‡∏∏‡∏£‡∏∞‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß</option> <option value="‡∏î‡∏π‡πÅ‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢">üíä ‡∏î‡∏π‡πÅ‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</option> <option value="‡∏ò‡∏∏‡∏£‡∏∞‡∏î‡πà‡∏ß‡∏ô">‚ö° ‡∏ò‡∏∏‡∏£‡∏∞‡∏î‡πà‡∏ß‡∏ô</option> <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">üìù ‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏£‡∏∞‡∏ö‡∏∏‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á)</option> </select>
       </div>
       <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">üìù ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label> <textarea id="formReasonDetail" rows="2" placeholder="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" class="w-full px-4 py-3 border-2 border-purple-100 rounded-xl focus:border-purple-400 transition-all resize-none"></textarea>
       </div>
       <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">üì∑ ‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏£‡∏±‡∏ö</label>
        <div class="border-2 border-dashed border-purple-200 rounded-xl p-4 text-center hover:border-purple-400 transition-all">
         <input type="file" id="formImage" accept="image/*" class="hidden" onchange="handleImageUpload(event)">
         <div id="imagePreview" class="hidden mb-3">
          <img id="previewImg" class="max-h-40 mx-auto rounded-xl shadow-lg">
         </div><button type="button" onclick="document.getElementById('formImage').click()" class="px-6 py-3 bg-purple-100 text-purple-600 rounded-xl hover:bg-purple-200 transition-all font-medium"> üì∏ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ‡∏´‡∏£‡∏∑‡∏≠ ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ </button>
         <p class="text-xs text-gray-400 mt-2">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏†‡∏≤‡∏û (‡∏à‡∏∞‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)</p>
        </div>
       </div><button onclick="submitRequest()" id="submitBtn" class="w-full py-4 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-xl font-semibold hover:from-purple-600 hover:to-blue-600 transform hover:scale-[1.02] transition-all shadow-lg text-lg"> ‚ú® ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô </button>
      </div>
      <div id="submitMessage" class="mt-4 hidden"></div>
     </div><!-- History -->
     <div id="historySection" class="glass-card rounded-2xl p-6 cute-shadow hidden">
      <div class="flex items-center gap-2 mb-6">
       <span class="text-3xl bounce-animation">üìã</span>
       <h2 class="text-xl font-bold text-gray-800">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏•‡∏≤</h2>
      </div>
      <div id="studentHistoryList" class="space-y-3">
       <div class="text-center py-8 text-gray-400">
        <div class="text-5xl mb-2">
         üì≠
        </div>
        <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏•‡∏≤</p>
       </div>
      </div>
     </div>
    </div>
   </div><!-- Teacher Dashboard -->
   <div id="teacherDashboard" class="min-h-full w-full p-4 relative z-10 hidden">
    <div class="max-w-6xl mx-auto">
     <!-- Header -->
     <div class="glass-card rounded-2xl p-4 mb-4 cute-shadow">
      <div class="flex items-center justify-between flex-wrap gap-4">
       <div class="flex items-center gap-3">
        <div class="text-4xl wiggle-animation">
         üë®‚Äçüè´
        </div>
        <div>
         <p class="font-semibold text-gray-800">‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô</p>
         <p class="text-sm text-gray-500">‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</p>
        </div>
       </div>
       <div class="flex items-center gap-3">
        <div id="notificationBell" class="relative cursor-pointer p-2 hover:bg-gray-100 rounded-full transition-all">
         <span class="text-2xl">üîî</span> <span id="notificationCount" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold hidden">0</span>
        </div><button onclick="logout()" class="px-4 py-2 bg-red-100 text-red-600 rounded-xl hover:bg-red-200 transition-all text-sm font-medium"> üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö </button>
       </div>
      </div>
     </div><!-- Stats -->
     <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
      <div class="glass-card rounded-2xl p-4 cute-shadow">
       <div class="flex items-center gap-3">
        <div class="w-12 h-12 bg-yellow-100 rounded-xl flex items-center justify-center text-2xl">
         ‚è≥
        </div>
        <div>
         <p class="text-2xl font-bold text-yellow-600" id="statPending">0</p>
         <p class="text-xs text-gray-500">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
        </div>
       </div>
      </div>
      <div class="glass-card rounded-2xl p-4 cute-shadow">
       <div class="flex items-center gap-3">
        <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center text-2xl">
         ‚úÖ
        </div>
        <div>
         <p class="text-2xl font-bold text-green-600" id="statApproved">0</p>
         <p class="text-xs text-gray-500">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</p>
        </div>
       </div>
      </div>
      <div class="glass-card rounded-2xl p-4 cute-shadow">
       <div class="flex items-center gap-3">
        <div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center text-2xl">
         ‚ùå
        </div>
        <div>
         <p class="text-2xl font-bold text-red-600" id="statRejected">0</p>
         <p class="text-xs text-gray-500">‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</p>
        </div>
       </div>
      </div>
      <div class="glass-card rounded-2xl p-4 cute-shadow">
       <div class="flex items-center gap-3">
        <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center text-2xl">
         üìä
        </div>
        <div>
         <p class="text-2xl font-bold text-blue-600" id="statTotal">0</p>
         <p class="text-xs text-gray-500">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
        </div>
       </div>
      </div>
     </div><!-- Teacher Tabs -->
     <div class="glass-card rounded-2xl p-2 mb-4 cute-shadow">
      <div class="flex gap-2 flex-wrap">
       <button onclick="showTeacherTab('pending')" id="teacherTabPending" class="flex-1 py-3 px-4 rounded-xl font-medium transition-all bg-gradient-to-r from-green-500 to-teal-500 text-white min-w-fit"> ‚è≥ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏Ç‡∏≠ </button> <button onclick="showTeacherTab('all')" id="teacherTabAll" class="flex-1 py-3 px-4 rounded-xl font-medium transition-all bg-gray-100 text-gray-600 hover:bg-gray-200 min-w-fit"> üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î </button> <button onclick="showTeacherTab('search')" id="teacherTabSearch" class="flex-1 py-3 px-4 rounded-xl font-medium transition-all bg-gray-100 text-gray-600 hover:bg-gray-200 min-w-fit"> üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ </button>
      </div>
     </div><!-- Pending Requests -->
     <div id="pendingSection" class="glass-card rounded-2xl p-6 cute-shadow">
      <div class="flex items-center gap-2 mb-6">
       <span class="text-3xl wiggle-animation">‚è≥</span>
       <h2 class="text-xl font-bold text-gray-800">‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</h2>
      </div>
      <div id="pendingList" class="space-y-4">
       <div class="text-center py-8 text-gray-400">
        <div class="text-5xl mb-2">
         üì≠
        </div>
        <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
       </div>
      </div>
     </div><!-- All Records -->
     <div id="allSection" class="glass-card rounded-2xl p-6 cute-shadow hidden">
      <div class="flex items-center gap-2 mb-6">
       <span class="text-3xl bounce-animation">üìã</span>
       <h2 class="text-xl font-bold text-gray-800">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
      </div>
      <div id="allList" class="space-y-4">
       <div class="text-center py-8 text-gray-400">
        <div class="text-5xl mb-2">
         üì≠
        </div>
        <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
       </div>
      </div>
     </div><!-- Search Section -->
     <div id="searchSection" class="glass-card rounded-2xl p-6 cute-shadow hidden">
      <div class="flex items-center gap-2 mb-6">
       <span class="text-3xl bounce-animation">üîç</span>
       <h2 class="text-xl font-bold text-gray-800">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
       <input type="text" id="searchName" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠/‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" class="px-4 py-3 border-2 border-green-100 rounded-xl focus:border-green-400 transition-all" oninput="performSearch()"> <input type="date" id="searchDate" class="px-4 py-3 border-2 border-green-100 rounded-xl focus:border-green-400 transition-all" onchange="performSearch()"> <select id="searchStatus" class="px-4 py-3 border-2 border-green-100 rounded-xl focus:border-green-400 transition-all" onchange="performSearch()"> <option value="">-- ‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ --</option> <option value="pending">‚è≥ ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option> <option value="approved">‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</option> <option value="rejected">‚ùå ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</option> </select>
      </div>
      <div id="searchResults" class="space-y-4">
       <div class="text-center py-8 text-gray-400">
        <div class="text-5xl mb-2">
         üîç
        </div>
        <p>‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>
       </div>
      </div>
     </div>
    </div>
   </div><!-- Reject Modal -->
   <div id="rejectModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden p-4">
    <div class="bg-white rounded-2xl p-6 w-full max-w-md cute-shadow">
     <div class="text-center mb-4">
      <div class="text-5xl mb-2">
       ‚ùå
      </div>
      <h3 class="text-xl font-bold text-gray-800">‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏Ç‡∏≠</h3>
     </div>
     <div class="mb-4">
      <label class="block text-sm font-medium text-gray-700 mb-2">üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</label> <textarea id="rejectNote" rows="3" placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•..." class="w-full px-4 py-3 border-2 border-red-100 rounded-xl focus:border-red-400 transition-all resize-none"></textarea>
     </div>
     <div class="flex gap-3">
      <button onclick="closeRejectModal()" class="flex-1 py-3 bg-gray-100 text-gray-600 rounded-xl font-medium hover:bg-gray-200 transition-all"> ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å </button> <button onclick="confirmReject()" class="flex-1 py-3 bg-red-500 text-white rounded-xl font-medium hover:bg-red-600 transition-all"> ‚ùå ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ </button>
     </div>
    </div>
   </div><!-- Image Modal -->
   <div id="imageModal" class="fixed inset-0 bg-black/80 flex items-center justify-center z-50 hidden p-4" onclick="closeImageModal()">
    <div class="max-w-2xl max-h-[80%] overflow-hidden">
     <img id="modalImage" class="max-w-full max-h-full rounded-xl shadow-2xl">
    </div>
   </div><!-- Notification Toast -->
   <div id="toast" class="fixed top-4 right-4 bg-green-500 text-white px-6 py-4 rounded-xl shadow-lg z-50 hidden transform translate-x-full transition-transform">
    <div class="flex items-center gap-3">
     <span class="text-2xl">üîî</span>
     <div>
      <p class="font-semibold" id="toastTitle">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</p>
      <p class="text-sm opacity-90" id="toastMessage">‡∏°‡∏µ‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÉ‡∏´‡∏°‡πà</p>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Global State
    let currentUser = null;
    let userType = null;
    let allRecords = [];
    let pendingRejectId = null;
    let lastPendingCount = 0;
    
    const defaultConfig = {
      school_name: '‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô'
    };
    
    // LocalStorage Keys
    const STORAGE_KEY = 'leaveRecords';
    
    // Initialize
    async function initApp() {
      // Initialize Element SDK
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            const schoolName = config.school_name || defaultConfig.school_name;
            const el = document.getElementById('schoolNameDisplay');
            if (el) el.textContent = schoolName;
          },
          mapToCapabilities: (config) => ({
            recolorables: [],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ['school_name', config.school_name || defaultConfig.school_name]
          ])
        });
      }
      
      // Load records from localStorage
      loadRecords();
      
      // Set default date/time
      const today = new Date();
      const dateInput = document.getElementById('formDate');
      if (dateInput) {
        dateInput.value = today.toISOString().split('T')[0];
      }
      
      const timeInput = document.getElementById('formTimeOut');
      if (timeInput) {
        timeInput.value = today.toTimeString().slice(0, 5);
      }
    }
    
    // Load records from localStorage
    function loadRecords() {
      try {
        const stored = localStorage.getItem(STORAGE_KEY);
        allRecords = stored ? JSON.parse(stored) : [];
      } catch (err) {
        console.error('Failed to load records:', err);
        allRecords = [];
      }
    }
    
    // Save records to localStorage
    function saveRecords() {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(allRecords));
      } catch (err) {
        console.error('Failed to save records:', err);
      }
    }
    
    // Check for new notifications (for teachers)
    function checkNotifications() {
      if (userType !== 'teacher') return;
      
      const pendingCount = allRecords.filter(r => r.status === 'pending').length;
      
      if (pendingCount > lastPendingCount && lastPendingCount > 0) {
        showToast('‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÉ‡∏´‡∏°‡πà!', `‡∏°‡∏µ ${pendingCount - lastPendingCount} ‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£`);
      }
      
      lastPendingCount = pendingCount;
      
      // Update notification badge
      const countEl = document.getElementById('notificationCount');
      if (countEl) {
        if (pendingCount > 0) {
          countEl.textContent = pendingCount;
          countEl.classList.remove('hidden');
        } else {
          countEl.classList.add('hidden');
        }
      }
    }
    
    // Show toast notification
    function showToast(title, message) {
      const toast = document.getElementById('toast');
      const toastTitle = document.getElementById('toastTitle');
      const toastMessage = document.getElementById('toastMessage');
      
      if (toast && toastTitle && toastMessage) {
        toastTitle.textContent = title;
        toastMessage.textContent = message;
        toast.classList.remove('hidden', 'translate-x-full');
        
        setTimeout(() => {
          toast.classList.add('translate-x-full');
          setTimeout(() => toast.classList.add('hidden'), 300);
        }, 4000);
      }
    }
    
    // Update all UI elements
    function updateUI() {
      updateStats();
      
      if (userType === 'student' && currentUser) {
        updateStudentHistory();
      } else if (userType === 'teacher') {
        updatePendingList();
        updateAllList();
        performSearch();
      }
      
      checkNotifications();
    }
    
    // Update stats
    function updateStats() {
      const pending = allRecords.filter(r => r.status === 'pending').length;
      const approved = allRecords.filter(r => r.status === 'approved').length;
      const rejected = allRecords.filter(r => r.status === 'rejected').length;
      
      const statPending = document.getElementById('statPending');
      const statApproved = document.getElementById('statApproved');
      const statRejected = document.getElementById('statRejected');
      const statTotal = document.getElementById('statTotal');
      
      if (statPending) statPending.textContent = pending;
      if (statApproved) statApproved.textContent = approved;
      if (statRejected) statRejected.textContent = rejected;
      if (statTotal) statTotal.textContent = allRecords.length;
    }
    
    // Student login
    function studentLogin() {
      const studentId = document.getElementById('studentIdInput')?.value?.trim();
      const nationalId = document.getElementById('nationalIdInput')?.value?.trim();
      const errorEl = document.getElementById('loginError');
      
      if (!studentId || !nationalId || nationalId.length !== 4) {
        if (errorEl) {
          errorEl.textContent = '‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô 4 ‡∏ï‡∏±‡∏ß‡∏ó‡πâ‡∏≤‡∏¢';
          errorEl.classList.remove('hidden');
        }
        return;
      }
      
      currentUser = { studentId, nationalId };
      userType = 'student';
      
      const loginPageEl = document.getElementById('loginPage');
      const dashboardEl = document.getElementById('studentDashboard');
      
      if (loginPageEl) loginPageEl.classList.add('hidden');
      if (dashboardEl) dashboardEl.classList.remove('hidden');
      
      const welcomeEl = document.getElementById('welcomeStudent');
      const idEl = document.getElementById('studentIdDisplay');
      
      if (welcomeEl) welcomeEl.textContent = `‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô`;
      if (idEl) idEl.textContent = `‡∏£‡∏´‡∏±‡∏™: ${studentId}`;
      
      updateUI();
    }
    
    // Teacher login
    function teacherLogin() {
      const username = document.getElementById('teacherUsername')?.value?.trim();
      const password = document.getElementById('teacherPassword')?.value?.trim();
      const errorEl = document.getElementById('teacherLoginError');
      
      if (username === 'admin' && password === '1234') {
        currentUser = { username };
        userType = 'teacher';
        lastPendingCount = allRecords.filter(r => r.status === 'pending').length;
        
        const teacherLoginEl = document.getElementById('teacherLoginPage');
        const teacherDashEl = document.getElementById('teacherDashboard');
        
        if (teacherLoginEl) teacherLoginEl.classList.add('hidden');
        if (teacherDashEl) teacherDashEl.classList.remove('hidden');
        
        updateUI();
      } else {
        if (errorEl) {
          errorEl.classList.remove('hidden');
        }
      }
    }
    
    // Show teacher login
    function showTeacherLogin() {
      const loginPageEl = document.getElementById('loginPage');
      const teacherLoginEl = document.getElementById('teacherLoginPage');
      
      if (loginPageEl) loginPageEl.classList.add('hidden');
      if (teacherLoginEl) teacherLoginEl.classList.remove('hidden');
    }
    
    // Show student login
    function showStudentLogin() {
      const teacherLoginEl = document.getElementById('teacherLoginPage');
      const loginPageEl = document.getElementById('loginPage');
      
      if (teacherLoginEl) teacherLoginEl.classList.add('hidden');
      if (loginPageEl) loginPageEl.classList.remove('hidden');
    }
    
    // Logout
    function logout() {
      currentUser = null;
      userType = null;
      
      const studentDashEl = document.getElementById('studentDashboard');
      const teacherDashEl = document.getElementById('teacherDashboard');
      const loginPageEl = document.getElementById('loginPage');
      
      if (studentDashEl) studentDashEl.classList.add('hidden');
      if (teacherDashEl) teacherDashEl.classList.add('hidden');
      if (loginPageEl) loginPageEl.classList.remove('hidden');
      
      // Clear forms
      document.getElementById('studentIdInput').value = '';
      document.getElementById('nationalIdInput').value = '';
      document.getElementById('teacherUsername').value = '';
      document.getElementById('teacherPassword').value = '';
      document.getElementById('loginError').classList.add('hidden');
      document.getElementById('teacherLoginError').classList.add('hidden');
    }
    
    // Student tabs
    function showStudentTab(tab) {
      const tabRequest = document.getElementById('tabRequest');
      const tabHistory = document.getElementById('tabHistory');
      const requestForm = document.getElementById('requestForm');
      const historySection = document.getElementById('historySection');
      
      if (tab === 'request') {
        tabRequest.className = 'flex-1 py-3 px-4 rounded-xl font-medium transition-all bg-gradient-to-r from-purple-500 to-blue-500 text-white';
        tabHistory.className = 'flex-1 py-3 px-4 rounded-xl font-medium transition-all bg-gray-100 text-gray-600 hover:bg-gray-200';
        requestForm.classList.remove('hidden');
        historySection.classList.add('hidden');
      } else {
        tabHistory.className = 'flex-1 py-3 px-4 rounded-xl font-medium transition-all bg-gradient-to-r from-purple-500 to-blue-500 text-white';
        tabRequest.className = 'flex-1 py-3 px-4 rounded-xl font-medium transition-all bg-gray-100 text-gray-600 hover:bg-gray-200';
        historySection.classList.remove('hidden');
        requestForm.classList.add('hidden');
        updateStudentHistory();
      }
    }
    
    // Teacher tabs
    function showTeacherTab(tab) {
      const tabs = ['pending', 'all', 'search'];
      tabs.forEach(t => {
        const tabEl = document.getElementById(`teacherTab${t.charAt(0).toUpperCase() + t.slice(1)}`);
        const sectionEl = document.getElementById(`${t}Section`);
        
        if (t === tab) {
          tabEl.className = 'flex-1 py-3 px-4 rounded-xl font-medium transition-all bg-gradient-to-r from-green-500 to-teal-500 text-white min-w-fit';
          sectionEl.classList.remove('hidden');
        } else {
          tabEl.className = 'flex-1 py-3 px-4 rounded-xl font-medium transition-all bg-gray-100 text-gray-600 hover:bg-gray-200 min-w-fit';
          sectionEl.classList.add('hidden');
        }
      });
    }
    
    // Image upload with compression
    let uploadedImage = '';
    
    async function handleImageUpload(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      try {
        const compressed = await compressImage(file, 800, 0.7);
        uploadedImage = compressed;
        
        const previewEl = document.getElementById('imagePreview');
        const imgEl = document.getElementById('previewImg');
        
        if (previewEl && imgEl) {
          imgEl.src = compressed;
          previewEl.classList.remove('hidden');
        }
      } catch (err) {
        console.error('Image compression error:', err);
      }
    }
    
    function compressImage(file, maxWidth, quality) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = (e) => {
          const img = new Image();
          img.onload = () => {
            const canvas = document.createElement('canvas');
            let width = img.width;
            let height = img.height;
            
            if (width > maxWidth) {
              height = (height * maxWidth) / width;
              width = maxWidth;
            }
            
            canvas.width = width;
            canvas.height = height;
            
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0, width, height);
            
            resolve(canvas.toDataURL('image/jpeg', quality));
          };
          img.onerror = reject;
          img.src = e.target.result;
        };
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }
    
    // Submit request
    async function submitRequest() {
      const name = document.getElementById('formName').value.trim();
      const classRoom = document.getElementById('formClass').value.trim();
      const date = document.getElementById('formDate').value;
      const timeOut = document.getElementById('formTimeOut').value;
      const timeReturn = document.getElementById('formTimeReturn').value;
      const reason = document.getElementById('formReason').value;
      const reasonDetail = document.getElementById('formReasonDetail').value.trim();
      const parentName = document.getElementById('formParentName').value.trim();
      const parentPhone = document.getElementById('formParentPhone').value.trim();
      const messageEl = document.getElementById('submitMessage');
      const submitBtn = document.getElementById('submitBtn');
      
      // Validation
      if (!name || !classRoom || !date || !timeOut || !reason || !parentName || !parentPhone) {
        messageEl.innerHTML = '<div class="p-4 bg-red-50 border border-red-200 rounded-xl text-red-600">‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô (‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á)</div>';
        messageEl.classList.remove('hidden');
        return;
      }
      
      // Check record limit
      if (allRecords.length >= 999) {
        messageEl.innerHTML = '<div class="p-4 bg-red-50 border border-red-200 rounded-xl text-red-600">‚ùå ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</div>';
        messageEl.classList.remove('hidden');
        return;
      }
      
      // Show loading
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<span class="animate-pulse">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠...</span>';
      
      const fullReason = reasonDetail ? `${reason} - ${reasonDetail}` : reason;
      
      const record = {
        id: 'leave_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
        type: 'leave_request',
        student_id: currentUser.studentId,
        national_id: currentUser.nationalId,
        student_name: name,
        class_room: classRoom,
        leave_date: date,
        leave_time: timeOut,
        return_time: timeReturn || '',
        reason: fullReason,
        parent_name: parentName,
        parent_phone: parentPhone,
        parent_image: uploadedImage || '',
        status: 'pending',
        reject_note: '',
        created_at: new Date().toISOString(),
        approved_at: '',
        approved_by: ''
      };
      
      try {
        allRecords.push(record);
        saveRecords();
        
        messageEl.innerHTML = '<div class="p-4 bg-green-50 border border-green-200 rounded-xl text-green-600">‚úÖ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏π</div>';
        
        // Reset form
        document.getElementById('formName').value = '';
        document.getElementById('formClass').value = '';
        document.getElementById('formReason').value = '';
        document.getElementById('formReasonDetail').value = '';
        document.getElementById('formTimeReturn').value = '';
        document.getElementById('formParentName').value = '';
        document.getElementById('formParentPhone').value = '';
        uploadedImage = '';
        document.getElementById('imagePreview').classList.add('hidden');
        document.getElementById('formImage').value = '';
        
        // Notify teachers
        lastPendingCount = allRecords.filter(r => r.status === 'pending').length;
        showToast('‡∏™‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢', '‡∏Ñ‡∏£‡∏π‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß');
      } catch (err) {
        messageEl.innerHTML = '<div class="p-4 bg-red-50 border border-red-200 rounded-xl text-red-600">‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</div>';
        console.error('Submit error:', err);
      }
      
      submitBtn.disabled = false;
      submitBtn.innerHTML = '‚ú® ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô';
      messageEl.classList.remove('hidden');
      
      setTimeout(() => messageEl.classList.add('hidden'), 5000);
    }
    
    // Update student history
    function updateStudentHistory() {
      const listEl = document.getElementById('studentHistoryList');
      if (!listEl || !currentUser) return;
      
      const myRecords = allRecords.filter(r => r.student_id === currentUser.studentId);
      
      if (myRecords.length === 0) {
        listEl.innerHTML = `
          <div class="text-center py-8 text-gray-400">
            <div class="text-5xl mb-2">üì≠</div>
            <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏•‡∏≤</p>
          </div>
        `;
        return;
      }
      
      listEl.innerHTML = myRecords.map(r => `
        <div class="p-4 bg-white rounded-xl border-2 ${getStatusBorderColor(r.status)} transition-all hover:shadow-md">
          <div class="flex items-start justify-between gap-4 flex-wrap">
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2 mb-2">
                <span class="px-3 py-1 rounded-full text-white text-xs font-medium ${getStatusClass(r.status)}">
                  ${getStatusText(r.status)}
                </span>
                <span class="text-sm text-gray-500">üìÖ ${formatDate(r.leave_date)}</span>
              </div>
              <p class="font-medium text-gray-800">${escapeHtml(r.student_name)} (${escapeHtml(r.class_room)})</p>
              <p class="text-sm text-gray-600">üë§ ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á: ${escapeHtml(r.parent_name)} | üì± ${escapeHtml(r.parent_phone)}</p>
              <p class="text-sm text-gray-600">üïê ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å: ${r.leave_time}${r.return_time ? ` | ‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö: ${r.return_time}` : ''}</p>
              <p class="text-sm text-gray-600">üìã ${escapeHtml(r.reason)}</p>
              ${r.status === 'rejected' && r.reject_note ? `<p class="text-sm text-red-500 mt-1">‚ùå ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ${escapeHtml(r.reject_note)}</p>` : ''}
              ${r.status === 'approved' ? `<p class="text-sm text-green-500 mt-1">‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÇ‡∏î‡∏¢: ${escapeHtml(r.approved_by || '‡∏Ñ‡∏£‡∏π')}</p>` : ''}
            </div>
            ${r.parent_image ? `
              <img src="${r.parent_image}" class="w-16 h-16 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-all" 
                onclick="showImage('${r.parent_image.replace(/'/g, "\\'")}')" alt="‡∏£‡∏π‡∏õ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á">
            ` : ''}
          </div>
        </div>
      `).join('');
    }
    
    // Update pending list
    function updatePendingList() {
      const listEl = document.getElementById('pendingList');
      if (!listEl) return;
      
      const pendingRecords = allRecords.filter(r => r.status === 'pending');
      
      if (pendingRecords.length === 0) {
        listEl.innerHTML = `
          <div class="text-center py-8 text-gray-400">
            <div class="text-5xl mb-2">‚úÖ</div>
            <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
          </div>
        `;
        return;
      }
      
      listEl.innerHTML = pendingRecords.map(r => createTeacherCard(r, true)).join('');
    }
    
    // Update all list
    function updateAllList() {
      const listEl = document.getElementById('allList');
      if (!listEl) return;
      
      if (allRecords.length === 0) {
        listEl.innerHTML = `
          <div class="text-center py-8 text-gray-400">
            <div class="text-5xl mb-2">üì≠</div>
            <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
          </div>
        `;
        return;
      }
      
      const sorted = [...allRecords].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
      listEl.innerHTML = sorted.map(r => createTeacherCard(r, false)).join('');
    }
    
    // Create teacher card
    function createTeacherCard(r, showActions) {
      return `
        <div class="p-4 bg-white rounded-xl border-2 ${getStatusBorderColor(r.status)} transition-all hover:shadow-md">
          <div class="flex items-start gap-4 flex-wrap">
            ${r.parent_image ? `
              <img src="${r.parent_image}" class="w-20 h-20 object-cover rounded-xl cursor-pointer hover:opacity-80 transition-all flex-shrink-0" 
                onclick="showImage('${r.parent_image.replace(/'/g, "\\'")}')" alt="‡∏£‡∏π‡∏õ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á">
            ` : '<div class="w-20 h-20 bg-gray-100 rounded-xl flex items-center justify-center text-3xl flex-shrink-0">üë§</div>'}
            
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2 mb-2 flex-wrap">
                <span class="px-3 py-1 rounded-full text-white text-xs font-medium ${getStatusClass(r.status)}">
                  ${getStatusText(r.status)}
                </span>
                <span class="text-sm text-gray-500">üìÖ ${formatDate(r.leave_date)}</span>
                <span class="text-sm text-gray-400">üïê ${formatTime(r.created_at)}</span>
              </div>
              <p class="font-semibold text-gray-800 text-lg">${escapeHtml(r.student_name)}</p>
              <p class="text-sm text-gray-600">üé´ ‡∏£‡∏´‡∏±‡∏™: ${escapeHtml(r.student_id)} | üè´ ‡∏´‡πâ‡∏≠‡∏á: ${escapeHtml(r.class_room)}</p>
              <p class="text-sm text-gray-600">üë§ ‡∏ú‡∏π‡πâ‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á: ${escapeHtml(r.parent_name)} | üì± ${escapeHtml(r.parent_phone)}</p>
              <p class="text-sm text-gray-600">üïê ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å: ${r.leave_time}${r.return_time ? ` | ‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏•‡∏±‡∏ö: ${r.return_time}` : ' | ‡πÑ‡∏°‡πà‡∏Å‡∏•‡∏±‡∏ö'}</p>
              <p class="text-sm text-gray-700 mt-1">üìã <span class="font-medium">${escapeHtml(r.reason)}</span></p>
              ${r.status === 'rejected' && r.reject_note ? `<p class="text-sm text-red-500 mt-1">‚ùå ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ${escapeHtml(r.reject_note)}</p>` : ''}
              ${r.status === 'approved' ? `<p class="text-sm text-green-500 mt-1">‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÇ‡∏î‡∏¢: ${escapeHtml(r.approved_by || '‡∏Ñ‡∏£‡∏π')} | ${formatTime(r.approved_at)}</p>` : ''}
            </div>
            
            ${showActions ? `
              <div class="flex gap-2 flex-shrink-0">
                <button onclick="approveRequest('${r.id}')" 
                  class="px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-all font-medium">
                  ‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
                </button>
                <button onclick="showRejectModal('${r.id}')" 
                  class="px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all font-medium">
                  ‚ùå ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥
                </button>
              </div>
            ` : ''}
          </div>
        </div>
      `;
    }
    
    // Search
    function performSearch() {
      const searchName = document.getElementById('searchName').value.toLowerCase().trim();
      const searchDate = document.getElementById('searchDate').value;
      const searchStatus = document.getElementById('searchStatus').value;
      const resultsEl = document.getElementById('searchResults');
      
      if (!resultsEl) return;
      
      let filtered = [...allRecords];
      
      if (searchName) {
        filtered = filtered.filter(r => 
          r.student_name.toLowerCase().includes(searchName) || 
          r.student_id.toLowerCase().includes(searchName)
        );
      }
      
      if (searchDate) {
        filtered = filtered.filter(r => r.leave_date === searchDate);
      }
      
      if (searchStatus) {
        filtered = filtered.filter(r => r.status === searchStatus);
      }
      
      if (filtered.length === 0) {
        resultsEl.innerHTML = `
          <div class="text-center py-8 text-gray-400">
            <div class="text-5xl mb-2">üîç</div>
            <p>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>
          </div>
        `;
        return;
      }
      
      resultsEl.innerHTML = filtered.map(r => createTeacherCard(r, r.status === 'pending')).join('');
    }
    
    // Approve request
    function approveRequest(id) {
      const index = allRecords.findIndex(r => r.id === id);
      if (index === -1) return;
      
      allRecords[index].status = 'approved';
      allRecords[index].approved_at = new Date().toISOString();
      allRecords[index].approved_by = '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';
      
      saveRecords();
      updateUI();
      showToast('‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
    }
    
    // Show reject modal
    function showRejectModal(id) {
      pendingRejectId = id;
      document.getElementById('rejectNote').value = '';
      document.getElementById('rejectModal').classList.remove('hidden');
    }
    
    // Close reject modal
    function closeRejectModal() {
      pendingRejectId = null;
      document.getElementById('rejectModal').classList.add('hidden');
    }
    
    // Confirm reject
    function confirmReject() {
      if (!pendingRejectId) return;
      
      const note = document.getElementById('rejectNote').value.trim();
      if (!note) {
        document.getElementById('rejectNote').style.borderColor = '#f87171';
        return;
      }
      
      const index = allRecords.findIndex(r => r.id === pendingRejectId);
      if (index === -1) return;
      
      allRecords[index].status = 'rejected';
      allRecords[index].reject_note = note;
      allRecords[index].approved_at = new Date().toISOString();
      allRecords[index].approved_by = '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';
      
      saveRecords();
      updateUI();
      showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß', '‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
      closeRejectModal();
    }
    
    // Show image modal
    function showImage(src) {
      const modal = document.getElementById('imageModal');
      const img = document.getElementById('modalImage');
      if (modal && img) {
        img.src = src;
        modal.classList.remove('hidden');
      }
    }
    
    // Close image modal
    function closeImageModal() {
      document.getElementById('imageModal').classList.add('hidden');
    }
    
    // Utility functions
    function getStatusClass(status) {
      switch (status) {
        case 'pending': return 'status-pending';
        case 'approved': return 'status-approved';
        case 'rejected': return 'status-rejected';
        default: return 'bg-gray-500';
      }
    }
    
    function getStatusBorderColor(status) {
      switch (status) {
        case 'pending': return 'border-yellow-200';
        case 'approved': return 'border-green-200';
        case 'rejected': return 'border-red-200';
        default: return 'border-gray-200';
      }
    }
    
    function getStatusText(status) {
      switch (status) {
        case 'pending': return '‚è≥ ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£';
        case 'approved': return '‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß';
        case 'rejected': return '‚ùå ‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥';
        default: return status;
      }
    }
    
    function formatDate(dateStr) {
      if (!dateStr) return '-';
      const date = new Date(dateStr);
      return date.toLocaleDateString('th-TH', { day: 'numeric', month: 'short', year: 'numeric' });
    }
    
    function formatTime(dateStr) {
      if (!dateStr) return '-';
      const date = new Date(dateStr);
      return date.toLocaleTimeString('th-TH', { hour: '2-digit', minute: '2-digit' });
    }
    
    function escapeHtml(str) {
      if (!str) return '';
      const div = document.createElement('div');
      div.textContent = str;
      return div.innerHTML;
    }
    
    // Initialize on load
    initApp();
  </script>
  <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cb8658e21af98df',t:'MTc3MDY5Mjg1MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cb87616230998de',t:'MTc3MDY5MzUyOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
